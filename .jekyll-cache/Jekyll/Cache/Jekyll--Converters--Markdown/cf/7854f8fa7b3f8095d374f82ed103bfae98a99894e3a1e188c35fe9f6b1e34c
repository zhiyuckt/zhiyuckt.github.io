I"¡®<h1 id="in-this-post-you-can-learn-how-to-create-your-own-jekyll-theme">In this post you can learn how to create your own jekyll theme</h1>

<h2>ÁõÆÂΩï</h2>

<ul id="markdown-toc">
  <li><a href="#in-this-post-you-can-learn-how-to-create-your-own-jekyll-theme" id="markdown-toc-in-this-post-you-can-learn-how-to-create-your-own-jekyll-theme">In this post you can learn how to create your own jekyll theme</a>    <ul>
      <li><a href="#set-up-the-jekyll-environment" id="markdown-toc-set-up-the-jekyll-environment">Set up the Jekyll environment</a></li>
      <li><a href="#run-the-jekyll-server" id="markdown-toc-run-the-jekyll-server">Run the Jekyll server</a></li>
      <li><a href="#github-pages-localization" id="markdown-toc-github-pages-localization">Github Pages localization</a></li>
      <li><a href="#set-up-the-environment-on-windows" id="markdown-toc-set-up-the-environment-on-windows">Set up the environment on Windows</a></li>
      <li><a href="#you-need-a-web-prototype" id="markdown-toc-you-need-a-web-prototype">You need a Web Prototype</a></li>
      <li><a href="#what-is-jekyll" id="markdown-toc-what-is-jekyll">What is Jekyll</a></li>
      <li><a href="#how-markdown-works-in-jekyll" id="markdown-toc-how-markdown-works-in-jekyll">How markdown Works in Jekyll</a></li>
      <li><a href="#how-highlight-works-in-jekyll" id="markdown-toc-how-highlight-works-in-jekyll">How highlight Works in Jekyll</a></li>
      <li><a href="#create-the-jekyll-theme" id="markdown-toc-create-the-jekyll-theme">Create the Jekyll Theme</a>        <ul>
          <li><a href="#new-a-theme" id="markdown-toc-new-a-theme">new a theme</a></li>
          <li><a href="#the-jekyll-theme-structure" id="markdown-toc-the-jekyll-theme-structure">the Jekyll theme structure</a></li>
          <li><a href="#simplify-the-theme" id="markdown-toc-simplify-the-theme">Simplify the theme</a></li>
          <li><a href="#deeper-in-jekyll" id="markdown-toc-deeper-in-jekyll">Deeper in Jekyll</a>            <ul>
              <li><a href="#the-_layouts-directory" id="markdown-toc-the-_layouts-directory">the <code class="language-plaintext highlighter-rouge">_layouts</code> Directory</a></li>
              <li><a href="#the-_includes-directory" id="markdown-toc-the-_includes-directory">the <code class="language-plaintext highlighter-rouge">_includes</code> Directory</a></li>
              <li><a href="#the-_configyml-file" id="markdown-toc-the-_configyml-file">the <code class="language-plaintext highlighter-rouge">_config.yml</code> File</a></li>
              <li><a href="#new-a-page" id="markdown-toc-new-a-page">New a Page</a></li>
              <li><a href="#the-front-matter-in-page" id="markdown-toc-the-front-matter-in-page">the <code class="language-plaintext highlighter-rouge">front matter</code> in page</a></li>
              <li><a href="#the-site-variable" id="markdown-toc-the-site-variable">the <code class="language-plaintext highlighter-rouge">site</code> Variable</a></li>
              <li><a href="#the-page-variable" id="markdown-toc-the-page-variable">the <code class="language-plaintext highlighter-rouge">page</code> Variable</a></li>
              <li><a href="#the-liquid-language" id="markdown-toc-the-liquid-language">the <code class="language-plaintext highlighter-rouge">Liquid</code> Language</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#what-else-did-i-do" id="markdown-toc-what-else-did-i-do">What else did I do</a>        <ul>
          <li><a href="#database-file" id="markdown-toc-database-file">Database File</a></li>
          <li><a href="#a-category-a-page" id="markdown-toc-a-category-a-page">A category a page</a></li>
          <li><a href="#subdirs-as-categories" id="markdown-toc-subdirs-as-categories">Subdirs as Categories</a></li>
        </ul>
      </li>
      <li><a href="#upload-your-theme-to-jekyllthemes" id="markdown-toc-upload-your-theme-to-jekyllthemes">Upload your theme to JekyllThemes</a></li>
      <li><a href="#references" id="markdown-toc-references">References</a></li>
    </ul>
  </li>
</ul>

<h2 id="set-up-the-jekyll-environment">Set up the Jekyll environment</h2>

<ol>
  <li>install ruby<br />
  <code class="language-plaintext highlighter-rouge">sudo apt-get install ruby</code></li>
  <li>install the Jekyll ruby gem<br />
  <code class="language-plaintext highlighter-rouge">sudo gem install jekyll</code></li>
  <li>install the kramdown ruby gem<br />
  <code class="language-plaintext highlighter-rouge">sudo gem install kramdown</code></li>
  <li>install the rouge ruby gem<br />
  <code class="language-plaintext highlighter-rouge">sudo gem install rouge</code></li>
  <li>test Jekyll<br />
  <code class="language-plaintext highlighter-rouge">jekyll --version</code></li>
</ol>

<blockquote>
  <p>From above you can know all these are base on ruby language</p>
</blockquote>

<h2 id="run-the-jekyll-server">Run the Jekyll server</h2>

<ol>
  <li>new a jekyll theme<br />
  <code class="language-plaintext highlighter-rouge">jekyll new mytheme</code></li>
  <li>run the server<br />
  <code class="language-plaintext highlighter-rouge">cd mytheme</code><br />
  <code class="language-plaintext highlighter-rouge">jekyll server</code></li>
  <li>visit <a href="http://127.0.0.1:4000">127.0.0.1:4000</a></li>
</ol>

<h2 id="github-pages-localization">Github Pages localization</h2>

<p>After Pushing the jekyll theme to github pages, the site would run on the github server which is different with the local environment. It may cause some display problems. So it‚Äôs recommended to set up the github pages environment locally.</p>

<ol>
  <li>update ruby to 2.0.0 or higher<br />
if <code class="language-plaintext highlighter-rouge">ruby --version</code> is not higher than 2.0.0Ôºåyou need to update it</li>
  <li>install the <a href="http://bundler.io/">Bundler</a><br />
  <code class="language-plaintext highlighter-rouge">sudo gem install bundler</code></li>
  <li>create a file called <code class="language-plaintext highlighter-rouge">Gemfile</code> in the jekyll theme root directory</li>
  <li>add these text to the <code class="language-plaintext highlighter-rouge">Gemfile</code><br />
  <code class="language-plaintext highlighter-rouge">source 'https://rubygems.org'</code><br />
  <code class="language-plaintext highlighter-rouge">gem 'github-pages', group::jekyll_plugins</code></li>
  <li>install the Github Pages tool sets<br />
  <code class="language-plaintext highlighter-rouge">bundle install</code></li>
  <li>run<br />
  <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve</code></li>
</ol>

<p>More About Github Pages Localization, See <a href="https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll">github-helper-setting-up-your-github-pages-site-locally-with-jekyll</a></p>

<p>If <code class="language-plaintext highlighter-rouge">bundle exec jekyll serve</code> is ok but <code class="language-plaintext highlighter-rouge">jekyll serve</code> is failed, you can delete the <code class="language-plaintext highlighter-rouge">Gemfile</code> and the <code class="language-plaintext highlighter-rouge">Gemfile.lock</code> then run <code class="language-plaintext highlighter-rouge">jekyll serve</code> again.</p>

<h2 id="set-up-the-environment-on-windows">Set up the environment on Windows</h2>

<ol>
  <li>install the ruby and devkit for windows<br />
  download <a href="http://rubyinstaller.org/downloads">ruby for windows</a>, it‚Äôs better to install ruby 2.0.0 or higher„ÄÇ<br />
  you need to install the <a href="http://rubyinstaller.org/downloads">ruby-devkit</a> too !</li>
  <li>set up the command line environment variable<br />
  generally the installer would do this for you, but you also can add it by yourself. Add <code class="language-plaintext highlighter-rouge">C:\Ruby22\bin;</code> to the windows environment variable <code class="language-plaintext highlighter-rouge">path</code>.</li>
  <li>install Jekyll<br />
  <code class="language-plaintext highlighter-rouge">gem install jekyll</code><br />
  if not found the command, run <code class="language-plaintext highlighter-rouge">set a = b</code> and try it again. maybe the variable was not active.</li>
  <li>install bundler<br />
  <code class="language-plaintext highlighter-rouge">gem install bundler</code></li>
  <li>github pages Localization<br />
  create a <code class="language-plaintext highlighter-rouge">Gemfile</code> and add the text above<br />
  <code class="language-plaintext highlighter-rouge">bundle install</code></li>
  <li>run<br />
  <code class="language-plaintext highlighter-rouge">bundle exec jekyll server</code></li>
</ol>

<blockquote>
  <p>on windows command line<br />
command gem is the gem.bat</p>
</blockquote>

<h2 id="you-need-a-web-prototype">You need a Web Prototype</h2>

<p>The current blog only has three pagesÔºö<code class="language-plaintext highlighter-rouge">index.html</code>„ÄÅ<code class="language-plaintext highlighter-rouge">article.html</code> and <code class="language-plaintext highlighter-rouge">post.html</code>.<br />
If you already had the web prototype, you can merge into the jekyll theme now.</p>

<h2 id="what-is-jekyll">What is Jekyll</h2>

<p>Jekyll is a static blog system, it dose not has the database and comment modules.</p>

<blockquote>
  <p>jekyll is writable before run and is read-only when running.</p>
</blockquote>

<h2 id="how-markdown-works-in-jekyll">How markdown Works in Jekyll</h2>

<p>this is a markdown textÔºö</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gu">## Markdown Demo</span>

This is a <span class="sb">`markdown`</span> demo
<span class="gt">
&gt; try it</span>
</code></pre></div></div>

<p>After a markdown converter we got the htmlÔºö</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h2&gt;</span>Markdown Demo<span class="nt">&lt;/h2&gt;</span>
<span class="nt">&lt;p&gt;</span>This is a <span class="nt">&lt;code&gt;</span>markdown<span class="nt">&lt;/code&gt;</span> demo<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;blockquote&gt;</span>
    <span class="nt">&lt;p&gt;</span>try it<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/blockquote&gt;</span>
</code></pre></div></div>

<p>We directly open it with a browserÔºö</p>

<p><img src="/w3c/images/markdown/markdown-plain.jpg" alt="markdown-plain" title="htmlÊïàÊûú" /></p>

<p>Yet, it dose not has any visual effects.<br />
<strong>Markdown text is only converted to html textÔºåit has no any style-sheet !</strong></p>

<p>For pretty view, we add the following style-sheet:</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nt">style</span><span class="o">&gt;</span>
<span class="nt">h2</span> <span class="p">{</span>
	<span class="nl">color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">blockquote</span> <span class="p">{</span>
	<span class="nl">background-color</span><span class="p">:</span> <span class="m">#fef3f3</span><span class="p">;</span>
	<span class="nl">border-left</span><span class="p">:</span> <span class="m">4px</span> <span class="nb">solid</span> <span class="m">#d6a6a6</span><span class="p">;</span>
	<span class="nl">margin</span><span class="p">:</span> <span class="m">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="nt">style</span><span class="o">&gt;</span>
</code></pre></div></div>
<p>Yes, now we got a more beautiful pageÔºö</p>

<p><img src="/w3c/images/markdown/markdown-css.jpg" alt="markdown-css" title="Ê∑ªÂä†cssÂêéhtmlÊïàÊûú" /></p>

<p><strong>Summary</strong></p>

<ol>
  <li>markdown converter converts the markdown text to html plain text</li>
  <li>there is a css file for markdown in the Jekyll theme</li>
</ol>

<h2 id="how-highlight-works-in-jekyll">How highlight Works in Jekyll</h2>

<p>this is a markdown code blockÔºö</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ```css
  &lt;style&gt;
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
through language highlighter [rouge](https://github.com/jneen/rouge)Ôºåwe got the html textÔºö

```html
&lt;div class="language-css highlighter-rouge"&gt;
  &lt;pre class="highlight"&gt;
    &lt;code&gt;
      &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;
      &lt;span class="nt"&gt;style&lt;/span&gt;
      &lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&gt;
    &lt;/code&gt;
  &lt;/pre&gt;
&lt;/div&gt;
</code></pre></div></div>

<p>rouge has a style sheet called rouge.cssÔºö</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">.highlight</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#D53FB7</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highlight</span> <span class="nc">.o</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#f92672</span><span class="p">;</span>
<span class="p">}</span>
<span class="nc">.highlight</span> <span class="nc">.nt</span> <span class="p">{</span>
  <span class="nl">color</span><span class="p">:</span> <span class="m">#f92672</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This is why the language can highlight by strings variables or keywords</p>

<p><strong>Summary</strong></p>

<ol>
  <li>highlighter converts the code language with different selector</li>
  <li>there is a css file for highlight in the Jekyll theme</li>
</ol>

<p><code class="language-plaintext highlighter-rouge">Tips</code> how to get the rouge.css</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>rougify foo.rb
<span class="nv">$ </span>rougify style monokai.sublime <span class="o">&gt;</span> rouge.css
</code></pre></div></div>
<blockquote>
  <p>you can found these in the rouge site</p>
</blockquote>

<h2 id="create-the-jekyll-theme">Create the Jekyll Theme</h2>

<h3 id="new-a-theme">new a theme</h3>
<p><code class="language-plaintext highlighter-rouge">jekyll new mytheme</code></p>

<h3 id="the-jekyll-theme-structure">the Jekyll theme structure</h3>
<p>use <code class="language-plaintext highlighter-rouge">tree</code> command to see the root directory</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">index</span><span class="p">.</span><span class="nf">html</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">about</span><span class="p">.</span><span class="nf">md</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_config</span><span class="p">.</span><span class="nf">yml</span>       <span class="c1"># Jekyll config file</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">feed</span><span class="p">.</span><span class="nf">xml</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="no">Gemfile</span>           <span class="c1"># Github Pages Localization File</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="no">Gemfile</span><span class="p">.</span><span class="nf">lock</span>      <span class="c1"># Github Pages Localization File</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_sass</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_base</span><span class="p">.</span><span class="nf">scss</span>                  <span class="c1"># markdown css</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_layout</span><span class="p">.</span><span class="nf">scss</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">_syntax</span><span class="o">-</span><span class="n">highlighting</span><span class="p">.</span><span class="nf">scss</span>   <span class="c1"># highlight css</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">css</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">main</span><span class="p">.</span><span class="nf">scss</span>           <span class="c1">#</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_includes</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">footer</span><span class="p">.</span><span class="nf">html</span>         <span class="c1"># html segment</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">header</span><span class="p">.</span><span class="nf">html</span>         <span class="c1">#</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">head</span><span class="p">.</span><span class="nf">html</span>           <span class="c1">#</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">icon</span><span class="o">-</span><span class="n">github</span><span class="p">.</span><span class="nf">html</span>    <span class="c1">#</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">icon</span><span class="o">-</span><span class="n">github</span><span class="p">.</span><span class="nf">svg</span>     <span class="c1"># github icon</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">icon</span><span class="o">-</span><span class="n">twitter</span><span class="p">.</span><span class="nf">html</span>   <span class="c1">#</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">icon</span><span class="o">-</span><span class="n">twitter</span><span class="p">.</span><span class="nf">svg</span>    <span class="c1"># twitter icon</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_layouts</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">default</span><span class="p">.</span><span class="nf">html</span>        <span class="c1"># default layout</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">page</span><span class="p">.</span><span class="nf">html</span>           <span class="c1"># page layout</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">post</span><span class="p">.</span><span class="nf">html</span>           <span class="c1"># post layout</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_posts</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="n">welcome</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">jekyll</span><span class="p">.</span><span class="nf">markdown</span>
<span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">_site</span>             <span class="c1"># The Release Jekyll Site</span>
    <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">about</span>
    <span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">index</span><span class="p">.</span><span class="nf">html</span>
    <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">css</span>
    <span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">main</span><span class="p">.</span><span class="nf">css</span>  <span class="c1"># all the css above merge to this</span>
    <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">feed</span><span class="p">.</span><span class="nf">xml</span>
    <span class="err">‚îú‚îÄ‚îÄ</span> <span class="no">Gemfile</span>
    <span class="err">‚îú‚îÄ‚îÄ</span> <span class="no">Gemfile</span><span class="p">.</span><span class="nf">lock</span>
    <span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">index</span><span class="p">.</span><span class="nf">html</span>
    <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">jekyll</span>
        <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">update</span>
            <span class="err">‚îî‚îÄ‚îÄ</span> <span class="mi">2016</span>
                <span class="err">‚îî‚îÄ‚îÄ</span> <span class="mi">08</span>
                    <span class="err">‚îî‚îÄ‚îÄ</span> <span class="mi">24</span>
                        <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">welcome</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">jekyll</span><span class="p">.</span><span class="nf">html</span>
</code></pre></div></div>

<h3 id="simplify-the-theme">Simplify the theme</h3>
<p>remove unnecessary files, Simplify the themeÔºö</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">index</span><span class="p">.</span><span class="nf">html</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_config</span><span class="p">.</span><span class="nf">yml</span>       <span class="c1"># Jekyll config file</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">feed</span><span class="p">.</span><span class="nf">xml</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="no">Gemfile</span>           <span class="c1"># Github Pages Localization File</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="no">Gemfile</span><span class="p">.</span><span class="nf">lock</span>      <span class="c1"># Github Pages Localization File</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">css</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">markdown</span><span class="p">.</span><span class="nf">css</span>    <span class="c1"># extract markdown css from _site/css/main.css</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">highlight</span><span class="p">.</span><span class="nf">css</span>   <span class="c1"># extract highlight css from _site/css/main.css</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_includes</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_layouts</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="n">post</span><span class="p">.</span><span class="nf">html</span>       <span class="c1"># post layout</span>
<span class="err">‚îú‚îÄ‚îÄ</span> <span class="n">_posts</span>
<span class="err">‚îÇ¬†¬†</span> <span class="err">‚îî‚îÄ‚îÄ</span> <span class="mi">2016</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">24</span><span class="o">-</span><span class="n">welcome</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">jekyll</span><span class="p">.</span><span class="nf">markdown</span>

</code></pre></div></div>

<h3 id="deeper-in-jekyll">Deeper in Jekyll</h3>

<h4 id="the-_layouts-directory">the <code class="language-plaintext highlighter-rouge">_layouts</code> Directory</h4>
<p>the file in this directory is ‚Äùinclude‚Äù others.</p>

<h4 id="the-_includes-directory">the <code class="language-plaintext highlighter-rouge">_includes</code> Directory</h4>
<p>the file in this directory is ‚Äúbe included‚Äù by others.<br />
the include expressionÔºö  <code class="language-plaintext highlighter-rouge">{% include head.html %}</code></p>

<p>the releationships between _layouts „ÄÅ_includes and the html pagesÔºö<br />
<img src="/w3c/images/jekyll/jekyll-layout-include.jpg" alt="jekyll-layout-include" title="layout‰∏éincludeÂÖ≥Á≥ªÂõæ" /></p>

<blockquote>
  <p>NOTEÔºö<code class="language-plaintext highlighter-rouge">content</code> in default.html is different with <code class="language-plaintext highlighter-rouge">page.content</code> or <code class="language-plaintext highlighter-rouge">post.content</code>, the former is the html text after converted but the latters are source markdown text!</p>
</blockquote>

<h4 id="the-_configyml-file">the <code class="language-plaintext highlighter-rouge">_config.yml</code> File</h4>
<p>the most important file in Jekyll, you can store data, set the jekyll plugins or set up the runtime environment.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># set a variable</span>
<span class="ss">domain: </span><span class="s2">"http://jokinkuang.info"</span> <span class="c1"># the domain URL for your site</span>

<span class="c1"># config</span>
<span class="ss">excerpt_separator: </span><span class="s2">"</span><span class="se">\n\n</span><span class="s2">"</span> <span class="c1"># you can specify your own separator here, default is "\n\n" String</span>
<span class="ss">permalink: </span><span class="sr">/:year/</span><span class="ss">:month</span><span class="o">/</span><span class="ss">:day</span><span class="o">/</span><span class="ss">:title</span><span class="p">.</span><span class="nf">html</span>
<span class="ss">highlighter: </span><span class="n">rouge</span>  <span class="c1"># use rouge as highlighter</span>
<span class="ss">markdown: </span><span class="n">kramdown</span>  <span class="c1"># use kramdown as markdown convertor</span>
<span class="ss">kramdown:
  input: </span><span class="no">GFM</span>
  <span class="ss">hard_wrap: </span><span class="kp">true</span> <span class="c1"># a newline in markdown text would be changed to &lt;br&gt;</span>
<span class="ss">gems:
  </span><span class="o">-</span> <span class="n">jemoji</span> <span class="c1"># if need Github Emoji you have to add it</span>

<span class="c1"># the Github would set up when upload to Github PagesÔºåSeeÔºöGithub Help With Configuring Jekyll</span>

<span class="c1"># Github Pages default settings, you can Override here !</span>
<span class="c1"># kramdown:</span>
<span class="c1">#   input: GFM</span>
<span class="c1">#   hard_wrap: false</span>
<span class="c1"># gems:</span>
<span class="c1">#   - jekyll-coffeescript</span>
<span class="c1">#   - jekyll-paginate</span>

<span class="c1"># Github Pages settings which you can NOT Override !</span>
<span class="c1"># lsi: false</span>
<span class="c1"># safe: true</span>
<span class="c1"># source: [your repo's top level directory]</span>
<span class="c1"># incremental: false</span>
<span class="c1"># highlighter: rouge</span>
<span class="c1"># gist:</span>
<span class="c1">#  noscript: false</span>
<span class="c1"># kramdown:</span>
<span class="c1">#  math_engine: mathjax</span>
</code></pre></div></div>

<h4 id="new-a-page">New a Page</h4>

<table>
  <tbody>
    <tr>
      <td>Way 1</td>
      <td>add <code class="language-plaintext highlighter-rouge">xxx.html</code> in <strong>jekyll-root</strong>Ôºåsite path is <code class="language-plaintext highlighter-rouge">/xxx.html</code></td>
    </tr>
    <tr>
      <td>Way 2</td>
      <td>add <code class="language-plaintext highlighter-rouge">xxx/index.html</code> in <strong>jekyll-root</strong>Ôºåsite path is <code class="language-plaintext highlighter-rouge">/xxx</code>ÔºåNo need postfix</td>
    </tr>
  </tbody>
</table>

<h4 id="the-front-matter-in-page">the <code class="language-plaintext highlighter-rouge">front matter</code> in page</h4>
<p>Every page has its own YAML front matter, which can create variables or override the variables in _config.yml</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">---</span>
<span class="ss">layout: </span><span class="n">post</span>
<span class="ss">title: </span><span class="n">step</span> <span class="n">by</span> <span class="n">step</span>
<span class="ss">categories: </span><span class="p">[</span><span class="n">jekyll</span> <span class="n">github</span> <span class="n">markdown</span> <span class="n">rouge</span><span class="p">]</span>
<span class="ss">date: </span><span class="mi">2016</span><span class="o">-</span><span class="mi">9</span><span class="o">-</span><span class="mi">3</span> <span class="mi">15</span><span class="p">:</span><span class="mi">47</span><span class="p">:</span><span class="mo">05</span>
<span class="ss">excerpt: </span><span class="s2">""</span>   <span class="c1"># override the post's default excerpt</span>
<span class="ss">pid: </span><span class="s2">""</span>       <span class="c1"># new a pid variable</span>
<span class="o">---</span>
</code></pre></div></div>

<h4 id="the-site-variable">the <code class="language-plaintext highlighter-rouge">site</code> Variable</h4>
<p>the site variable can access variables in <code class="language-plaintext highlighter-rouge">_config.yml</code> or JekyllÔºö</p>

<table>
  <tbody>
    <tr>
      <td>site.posts</td>
      <td>a posts collections from new to old</td>
    </tr>
    <tr>
      <td>site.categories</td>
      <td>categories and posts Map<code class="language-plaintext highlighter-rouge">{cate1:[post1, post2], cate2:[post3, post4]}</code></td>
    </tr>
    <tr>
      <td>site.tags</td>
      <td>tags and posts Map<code class="language-plaintext highlighter-rouge">{tag1:[post1, post2], tag2:[post3, post4]}</code></td>
    </tr>
    <tr>
      <td>site.XXX</td>
      <td>variables define in <code class="language-plaintext highlighter-rouge">_config.yml</code></td>
    </tr>
  </tbody>
</table>

<h4 id="the-page-variable">the <code class="language-plaintext highlighter-rouge">page</code> Variable</h4>
<p>the variable refer to current page, for example, in index.html, page is the index.html page, you can access the front matter in index.html:</p>

<table>
  <tbody>
    <tr>
      <td>page.content</td>
      <td>page <strong>source</strong>(markdown text)</td>
    </tr>
    <tr>
      <td>page.title</td>
      <td>page title</td>
    </tr>
    <tr>
      <td>page.excerpt</td>
      <td>excerpt <strong>source</strong></td>
    </tr>
    <tr>
      <td>page.url</td>
      <td>the <strong>relative path</strong></td>
    </tr>
    <tr>
      <td>page.date</td>
      <td>the date</td>
    </tr>
    <tr>
      <td>page.categories</td>
      <td>the categories arrayÔºå<code class="language-plaintext highlighter-rouge">linux/ruby/_posts/ruby.md</code> would merge linux and ruby into categoriesÔºåNOTE page.categories is different with site.categoriesÔºÅ</td>
    </tr>
    <tr>
      <td>page.tags</td>
      <td>the tags array</td>
    </tr>
    <tr>
      <td>page.path</td>
      <td>the path in source directory(source path)</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p>NOTEÔºöthe post in site.posts is almost the same as page variable</p>
</blockquote>

<h4 id="the-liquid-language">the <code class="language-plaintext highlighter-rouge">Liquid</code> Language</h4>
<p>if you want to do some logic operation, you need to learn the <a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers">Liquid language</a></p>

<ol>
  <li>
    <p>show the value of a variable<br />
 <code class="language-plaintext highlighter-rouge">{{ variable }}</code></p>

    <p>combine a stringÔºö<code class="language-plaintext highlighter-rouge">"head{{ variable }}tail"</code></p>

    <p>or use FilterÔºö<code class="language-plaintext highlighter-rouge">{{ "head" | append : variable | append : "tail" }}</code></p>
  </li>
  <li>
    <p>assign<br />
 <code class="language-plaintext highlighter-rouge">{% assign titleAndDate = page.title | append: page.date %}</code></p>

    <p><code class="language-plaintext highlighter-rouge">assign x = y</code> to create a <code class="language-plaintext highlighter-rouge">x</code> variableÔºå<strong>when assign you have to assign a valueÔºÅ</strong></p>

    <p><code class="language-plaintext highlighter-rouge">xxx | append: "str"</code> is Liquid‚Äôs Filter, just like <code class="language-plaintext highlighter-rouge">object | method:parameter</code></p>
  </li>
  <li>
    <p>if</p>

    <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="nv">site</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">""</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"A"</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div>    </div>
    <p>{% elsif site.title == ‚Äústepbystep‚Äù %}<br />
{% assign title = ‚ÄúB‚Äù %}<br />
{% else %}<br />
{% assign title = ‚ÄúC‚Äù %}<br />
{% endif %}</p>
  </li>
  <li>
    <p>for</p>

    <div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.posts</span><span class="w"> </span><span class="p">%}</span>
 <span class="p">{%</span><span class="w"> </span><span class="nt">assign</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">post</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">%}</span>
 The post title is <span class="p">{{</span><span class="w"> </span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>access map‚Äôs key and value<br />
 like <code class="language-plaintext highlighter-rouge">site.categories</code>, access the category called <code class="language-plaintext highlighter-rouge">linux</code> has two waysÔºö<br />
 Way 1: <code class="language-plaintext highlighter-rouge">site.categories.linux</code> is the posts list of linux category<br />
 Way 2: <code class="language-plaintext highlighter-rouge">for cate in site.categories</code>Ôºå<code class="language-plaintext highlighter-rouge">cate[0]</code> is linuxÔºå<code class="language-plaintext highlighter-rouge">cate[1]</code> is the posts list</p>
  </li>
</ol>

<blockquote>
  <p>NOTEÔºö{% %} <strong>can not break line</strong></p>
</blockquote>

<h2 id="what-else-did-i-do">What else did I do</h2>

<h3 id="database-file">Database File</h3>
<p>Jekyll dose not has database, but just like most <code class="language-plaintext highlighter-rouge">feed.xml</code> in jekyll themes, it just like a database file. Therefore, we can create a <code class="language-plaintext highlighter-rouge">postfile</code> to load all data we need and then get it by javascript when requesting the html page.</p>

<p>A Postfile formatted with json:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"posts"</span><span class="p">:</span><span class="w">
  </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
     </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"step by step to create a Jekyll theme"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"words"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1932"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jokin"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-03 23:47:05"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/2016/09/03/how-to-create-the-jekyll-theme.html"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"pid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20160903-154705"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"image"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/w3c/images/jekyll.jpg"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"jekyll"</span><span class="p">],</span><span class="w">
     </span><span class="nl">"excerpt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"learn how to create the jekyll theme..."</span><span class="w">
   </span><span class="p">}</span><span class="w">
   </span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="err">...</span><span class="w"> </span><span class="err">...</span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Liquid SyntaxÔºö</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "posts":
  [
  {% for post in site.posts %}
    {
      "title": "{{ post.title }}",
      "words": "{{ post.content | number_of_words }}",
      "author": "{{ site.author }}",
      "date": "{{ post.date | date:"%Y-%m-%d %H:%M:%S" }}",
      "url": "{{ post.url }}",
      "pid": "{{ post.pid }}",
      "categories": [
        {% for cate in post.categories %}
          "{{ cate }}"
        {% endfor %}
      ]
      ......
    }
  {% endfor %}
  ]
}
</code></pre></div></div>

<p><a href="https://raw.githubusercontent.com/jokinkuang/stepbystep/master/db/Postfile">Download the Postfile</a></p>

<h3 id="a-category-a-page">A category a page</h3>
<p>Usually the categories html page in jekyll theme is one page:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>linux
    - shell
mac
    - ios
    - xcode
windows
    - windows API
</code></pre></div></div>

<p>Because we only can loop it like this:</p>

<div class="language-liquid highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">cates</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">site.categories</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{{</span><span class="w"> </span><span class="nv">cates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="p">}}</span>
  <span class="p">{%</span><span class="w"> </span><span class="nt">for</span><span class="w"> </span><span class="nv">post</span><span class="w"> </span><span class="nt">in</span><span class="w"> </span><span class="nv">cates[1]</span><span class="w"> </span><span class="p">%}</span>
    <span class="p">{{</span><span class="w"> </span><span class="nv">post</span><span class="p">.</span><span class="nv">title</span><span class="w"> </span><span class="p">}}</span>
  <span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
<span class="p">{%</span><span class="w"> </span><span class="nt">endfor</span><span class="w"> </span><span class="p">%}</span>
</code></pre></div></div>

<p>If we want a category a page, we can not loop. we have to add the new category page hand by hand.<br />
But with upper <code class="language-plaintext highlighter-rouge">postfile</code> we can do that with javascript at the fore-end in browser.</p>

<p>We can loop it in browser to show the posts of the selected category.</p>

<h3 id="subdirs-as-categories">Subdirs as Categories</h3>
<p>Jekyll default supports that <code class="language-plaintext highlighter-rouge">/windows/api/_posts/2016-9-22-category.md</code>, the <code class="language-plaintext highlighter-rouge">windows</code> and <code class="language-plaintext highlighter-rouge">api</code> would be merged into the post categories.</p>

<p>But why not <code class="language-plaintext highlighter-rouge">_posts/windows/api/2016-9-22-category.md</code>.</p>

<p>We can use Liquid script to implement this feature. In <code class="language-plaintext highlighter-rouge">page</code> variable, <code class="language-plaintext highlighter-rouge">page.path</code> refers to the source path string <code class="language-plaintext highlighter-rouge">_posts/windows/api/2016-9-22-category.md</code>, we can split it to get the subdirs we want.</p>

<p>But note that, after that we can not access the <code class="language-plaintext highlighter-rouge">post.categories</code> or <code class="language-plaintext highlighter-rouge">site.categories</code> directly, cause the subdirs are not include.</p>

<p><a href="https://raw.githubusercontent.com/jokinkuang/stepbystep/master/_includes/post-categories.liquid">Liquid script to get the post‚Äôs categories</a><br />
<a href="https://raw.githubusercontent.com/jokinkuang/stepbystep/master/_includes/total-categories.liquid">Liquid script to get the site‚Äôs categories</a></p>

<h2 id="upload-your-theme-to-jekyllthemes">Upload your theme to JekyllThemes</h2>
<p><a href="http://jekyllthemes.org/">JekyllThemes</a></p>

<h2 id="references">References</h2>

<table>
  <tbody>
    <tr>
      <td>Read¬∑<a href="http://jekyll.bootcss.com/">Jekyll Chinese</a></td>
      <td><a href="http://jekyllrb.com/">English</a></td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>Read¬∑<a href="https://help.shopify.com/themes/liquid">Liquid Doc1</a></td>
      <td><a href="https://github.com/Shopify/liquid/wiki/Liquid-for-Designers">Doc2</a></td>
      <td><a href="https://shopify.github.io/liquid/">Doc3</a></td>
    </tr>
    <tr>
      <td>Read¬∑<a href="https://github.com/jneen/rouge">highlighter rouge Doc</a></td>
      <td>¬†</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>Read¬∑<a href="http://kramdown.gettalong.org/">Markdown convertor kramdown Ôºàsupport marukuÔºâ</a></td>
      <td>¬†</td>
      <td>¬†</td>
    </tr>
    <tr>
      <td>Read¬∑<a href="http://maruku.rubyforge.org/maruku.html">Markdown convertor maruku Ôºàsupport TOCÔºâ</a></td>
      <td>¬†</td>
      <td>¬†</td>
    </tr>
  </tbody>
</table>

:ET